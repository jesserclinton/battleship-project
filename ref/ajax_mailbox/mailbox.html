<!doctype html>
<html>
<head>
    <title>Mailbox</title>
	<script>
	function checkMsg() {
		xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = HandleData;
		xmlhttp.open("GET", "mailbox_get.php", true);
		xmlhttp.send();
	};
	
	function HandleData()  {
		if(xmlhttp.readyState == 4 && xmlhttp.status == 200) 
		{
			//alert(xmlhttp.responseText);
			var mailboxes = eval ('(' + xmlhttp.responseText + ')');
			var table = document.getElementById("mailboxes");
			
			var cnt = 0;
			for(var key in mailboxes) {
				document.getElementById("box_table").rows[cnt].cells[0].innerHTML=key;
				document.getElementById("box_table").rows[cnt].cells[1].innerHTML=mailboxes[key];
				cnt = cnt + 1;
			};
		};
	};
	
	</script>
</head>
<body>
    <H1>Mailbox</H1>
    <H2>Send Message</H2>
    <form action="mailbox_set.php" method="post">
    Name: <input type="text" name="name" size="30">
    Message: <input type="text" name="msg" size="30">
    <input type="submit" value="Send">
    </form>
	<BR>
	<button type="button" onclick="checkMsg()">Check for Messages</button>
	<div id="mailboxes">
	<table cellspacing="10" cellpadding="10" id="box_table">
		<tr id="row0">
			<td id="name0">
			Huey
			</td>
			<td id="msg0">
			Whats up
			</td>
		</tr>
		<tr id="row1">
			<td id="name1">
			</td>
			<td id="msg1">
			</td>
		</tr>
		<tr id="row2">
			<td id="name2">
			</td>
			<td id="msg2">
			</td>
		</tr>
		<tr id="row3">
			<td id="name3">
			</td>
			<td id="msg3">
			</td>
		</tr>
		<tr id="row4">
			<td id="name4">
			</td>
			<td id="msg4">
			</td>
		</tr>
	</table>
	</div>
</body>
</html>